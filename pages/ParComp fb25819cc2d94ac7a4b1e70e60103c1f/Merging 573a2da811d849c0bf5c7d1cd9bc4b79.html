<html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><title>Merging</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
-webkit-print-color-adjust: exact;
}
* {
box-sizing: border-box;
-webkit-print-color-adjust: exact;
}html,
body {
margin: 0;
padding: 0;
}
@media only screen {
body {
margin: 2em auto;
max-width: 900px;
color: rgb(55, 53, 47);
}
}body {
line-height: 1.5;
white-space: pre-wrap;
}a,
a.visited {
color: inherit;
text-decoration: underline;
}.pdf-relative-link-path {
font-size: 80%;
color: #444;
}h1,
h2,
h3 {
letter-spacing: -0.01em;
line-height: 1.2;
font-weight: 600;
margin-bottom: 0;
}.page-title {
font-size: 2.5rem;
font-weight: 700;
margin-top: 0;
margin-bottom: 0.75em;
}h1 {
font-size: 1.875rem;
margin-top: 1.875rem;
}h2 {
font-size: 1.5rem;
margin-top: 1.5rem;
}h3 {
font-size: 1.25rem;
margin-top: 1.25rem;
}.source {
border: 1px solid #ddd;
border-radius: 3px;
padding: 1.5em;
word-break: break-all;
}.callout {
border-radius: 3px;
padding: 1rem;
}figure {
margin: 1.25em 0;
page-break-inside: avoid;
}figcaption {
opacity: 0.5;
font-size: 85%;
margin-top: 0.5em;
}mark {
background-color: transparent;
}.indented {
padding-left: 1.5em;
}hr {
background: transparent;
display: block;
width: 100%;
height: 1px;
visibility: visible;
border: none;
border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}img {
max-width: 100%;
}@media only print {
img {
max-height: 100vh;
object-fit: contain;
}
}@page {
margin: 1in;
}.collection-content {
font-size: 0.875rem;
}.column-list {
display: flex;
justify-content: space-between;
}.column {
padding: 0 1em;
}.column:first-child {
padding-left: 0;
}.column:last-child {
padding-right: 0;
}.table_of_contents-item {
display: block;
font-size: 0.875rem;
line-height: 1.3;
padding: 0.125rem;
}.table_of_contents-indent-1 {
margin-left: 1.5rem;
}.table_of_contents-indent-2 {
margin-left: 3rem;
}.table_of_contents-indent-3 {
margin-left: 4.5rem;
}.table_of_contents-link {
text-decoration: none;
opacity: 0.7;
border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}table,
th,
td {
border: 1px solid rgba(55, 53, 47, 0.09);
border-collapse: collapse;
}table {
border-left: none;
border-right: none;
}th,
td {
font-weight: normal;
padding: 0.25em 0.5em;
line-height: 1.5;
min-height: 1.5em;
text-align: left;
}th {
color: rgba(55, 53, 47, 0.6);
}ol,
ul {
margin: 0;
margin-block-start: 0.6em;
margin-block-end: 0.6em;
}li > ol:first-child,
li > ul:first-child {
margin-block-start: 0.6em;
}ul > li {
list-style: disc;
}ul.to-do-list {
padding-inline-start: 0;
}ul.to-do-list > li {
list-style: none;
}.to-do-children-checked {
text-decoration: line-through;
opacity: 0.375;
}ul.toggle > li {
list-style: none;
}ul {
padding-inline-start: 1.7em;
}ul > li {
padding-left: 0.1em;
}ol {
padding-inline-start: 1.6em;
}ol > li {
padding-left: 0.2em;
}.mono ol {
padding-inline-start: 2em;
}.mono ol > li {
text-indent: -0.4em;
}.toggle {
padding-inline-start: 0em;
list-style-type: none;
}/* Indent toggle children */
.toggle > li > details {
padding-left: 1.7em;
}.toggle > li > details > summary {
margin-left: -1.1em;
}.selected-value {
display: inline-block;
padding: 0 0.5em;
background: rgba(206, 205, 202, 0.5);
border-radius: 3px;
margin-right: 0.5em;
margin-top: 0.3em;
margin-bottom: 0.3em;
white-space: nowrap;
}.collection-title {
display: inline-block;
margin-right: 1em;
}.page-description {
margin-bottom: 2em;
}.simple-table {
margin-top: 1em;
font-size: 0.875rem;
empty-cells: show;
}
.simple-table td {
height: 29px;
min-width: 120px;
}.simple-table th {
height: 29px;
min-width: 120px;
}.simple-table-header-color {
background: rgb(247, 246, 243);
color: black;
}
.simple-table-header {
font-weight: 500;
}time {
opacity: 0.5;
}.icon {
display: inline-block;
max-width: 1.2em;
max-height: 1.2em;
text-decoration: none;
vertical-align: text-bottom;
margin-right: 0.5em;
}img.icon {
border-radius: 3px;
}.user-icon {
width: 1.5em;
height: 1.5em;
border-radius: 100%;
margin-right: 0.5rem;
}.user-icon-inner {
font-size: 0.8em;
}.text-icon {
border: 1px solid #000;
text-align: center;
}.page-cover-image {
display: block;
object-fit: cover;
width: 100%;
max-height: 30vh;
}.page-header-icon {
font-size: 3rem;
margin-bottom: 1rem;
}.page-header-icon-with-cover {
margin-top: -0.72em;
margin-left: 0.07em;
}.page-header-icon img {
border-radius: 3px;
}.link-to-page {
margin: 1em 0;
padding: 0;
border: none;
font-weight: 500;
}p > .user {
opacity: 0.5;
}td > .user,
td > time {
white-space: nowrap;
}input[type="checkbox"] {
transform: scale(1.5);
margin-right: 0.6em;
vertical-align: middle;
}p {
margin-top: 0.5em;
margin-bottom: 0.5em;
}.image {
border: none;
margin: 1.5em 0;
padding: 0;
border-radius: 0;
text-align: center;
}.code,
code {
background: rgba(135, 131, 120, 0.15);
border-radius: 3px;
padding: 0.2em 0.4em;
border-radius: 3px;
font-size: 85%;
tab-size: 2;
}code {
color: #eb5757;
}.code {
padding: 1.5em 1em;
}.code-wrap {
white-space: pre-wrap;
word-break: break-all;
}.code > code {
background: none;
padding: 0;
font-size: 100%;
color: inherit;
}blockquote {
font-size: 1.25em;
margin: 1em 0;
padding-left: 1em;
border-left: 3px solid rgb(55, 53, 47);
}.bookmark {
text-decoration: none;
max-height: 8em;
padding: 0;
display: flex;
width: 100%;
align-items: stretch;
}.bookmark-title {
font-size: 0.85em;
overflow: hidden;
text-overflow: ellipsis;
height: 1.75em;
white-space: nowrap;
}.bookmark-text {
display: flex;
flex-direction: column;
}.bookmark-info {
flex: 4 1 180px;
padding: 12px 14px 14px;
display: flex;
flex-direction: column;
justify-content: space-between;
}.bookmark-image {
width: 33%;
flex: 1 1 180px;
display: block;
position: relative;
object-fit: cover;
border-radius: 1px;
}.bookmark-description {
color: rgba(55, 53, 47, 0.6);
font-size: 0.75em;
overflow: hidden;
max-height: 4.5em;
word-break: break-word;
}.bookmark-href {
font-size: 0.75em;
margin-top: 0.25em;
}.sans {
font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji",
"Segoe UI Symbol";
}
.code {
font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace;
}
.serif {
font-family: Lyon-Text, Georgia, ui-serif, serif;
}
.mono {
font-family: iawriter-mono, Nitti, Menlo, Courier, monospace;
}
.pdf .sans {
font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif,
"Segoe UI Emoji", "Segoe UI Symbol", "Twemoji", "Noto Color Emoji", "Noto Sans CJK JP";
}
.pdf:lang(zh-CN) .sans {
font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif,
"Segoe UI Emoji", "Segoe UI Symbol", "Twemoji", "Noto Color Emoji", "Noto Sans CJK SC";
}
.pdf:lang(zh-TW) .sans {
font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif,
"Segoe UI Emoji", "Segoe UI Symbol", "Twemoji", "Noto Color Emoji", "Noto Sans CJK TC";
}
.pdf:lang(ko-KR) .sans {
font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif,
"Segoe UI Emoji", "Segoe UI Symbol", "Twemoji", "Noto Color Emoji", "Noto Sans CJK KR";
}
.pdf .code {
font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, "Twemoji", "Noto Color Emoji",
"Noto Sans Mono CJK JP";
}
.pdf:lang(zh-CN) .code {
font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, "Twemoji", "Noto Color Emoji",
"Noto Sans Mono CJK SC";
}
.pdf:lang(zh-TW) .code {
font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, "Twemoji", "Noto Color Emoji",
"Noto Sans Mono CJK TC";
}
.pdf:lang(ko-KR) .code {
font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, "Twemoji", "Noto Color Emoji",
"Noto Sans Mono CJK KR";
}
.pdf .serif {
font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, "Twemoji", "Noto Color Emoji", "Noto Serif CJK JP";
}
.pdf:lang(zh-CN) .serif {
font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, "Twemoji", "Noto Color Emoji", "Noto Serif CJK SC";
}
.pdf:lang(zh-TW) .serif {
font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, "Twemoji", "Noto Color Emoji", "Noto Serif CJK TC";
}
.pdf:lang(ko-KR) .serif {
font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, "Twemoji", "Noto Color Emoji", "Noto Serif CJK KR";
}
.pdf .mono {
font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, "Twemoji", "Noto Color Emoji", "Noto Sans Mono CJK JP";
}
.pdf:lang(zh-CN) .mono {
font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, "Twemoji", "Noto Color Emoji", "Noto Sans Mono CJK SC";
}
.pdf:lang(zh-TW) .mono {
font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, "Twemoji", "Noto Color Emoji", "Noto Sans Mono CJK TC";
}
.pdf:lang(ko-KR) .mono {
font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, "Twemoji", "Noto Color Emoji", "Noto Sans Mono CJK KR";
}
.highlight-default {
color: rgba(55, 53, 47, 1);
}
.highlight-gray {
color: rgba(120, 119, 116, 1);
fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
color: rgba(159, 107, 83, 1);
fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
color: rgba(217, 115, 13, 1);
fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
color: rgba(203, 145, 47, 1);
fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
color: rgba(68, 131, 97, 1);
fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
color: rgba(51, 126, 169, 1);
fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
color: rgba(144, 101, 176, 1);
fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
color: rgba(193, 76, 138, 1);
fill: rgba(193, 76, 138, 1);
}
.highlight-red {
color: rgba(212, 76, 71, 1);
fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
background: rgba(253, 235, 236, 1);
}
.block-color-default {
color: inherit;
fill: inherit;
}
.block-color-gray {
color: rgba(120, 119, 116, 1);
fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
color: rgba(159, 107, 83, 1);
fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
color: rgba(217, 115, 13, 1);
fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
color: rgba(203, 145, 47, 1);
fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
color: rgba(68, 131, 97, 1);
fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
color: rgba(51, 126, 169, 1);
fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
color: rgba(144, 101, 176, 1);
fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
color: rgba(193, 76, 138, 1);
fill: rgba(193, 76, 138, 1);
}
.block-color-red {
color: rgba(212, 76, 71, 1);
fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
background: rgba(253, 235, 236, 1);
}
.select-value-color-interactiveBlue {
background-color: rgba(35, 131, 226, 0.07);
}
.select-value-color-pink {
background-color: rgba(245, 224, 233, 1);
}
.select-value-color-purple {
background-color: rgba(232, 222, 238, 1);
}
.select-value-color-green {
background-color: rgba(219, 237, 219, 1);
}
.select-value-color-gray {
background-color: rgba(227, 226, 224, 1);
}
.select-value-color-translucentGray {
background-color: rgba(255, 255, 255, 0.0375);
}
.select-value-color-orange {
background-color: rgba(250, 222, 201, 1);
}
.select-value-color-brown {
background-color: rgba(238, 224, 218, 1);
}
.select-value-color-red {
background-color: rgba(255, 226, 221, 1);
}
.select-value-color-yellow {
background-color: rgba(253, 236, 200, 1);
}
.select-value-color-blue {
background-color: rgba(211, 229, 239, 1);
}
.select-value-color-pageGlass {
background-color: undefined;
}
.select-value-color-washGlass {
background-color: undefined;
}.checkbox {
display: inline-flex;
vertical-align: text-bottom;
width: 16;
height: 16;
background-size: 16px;
margin-left: 2px;
margin-right: 5px;
}.checkbox-on {
background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}.checkbox-off {
background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}/* -------- injections from notionBackup -------- */body {
white-space: normal !important;
}p {
min-height: 1em !important;
}.code,
code {
font-size: 100% !important;
}blockquote {
font-size: 100% !important;
}.callout {
white-space: normal !important;
}
.callout div:has(span.icon) {
font-size: 100% !important;
}.source:not(.bookmark) {
font-size: 100% !important;
}p {
min-height: 1em !important;
}
</style></head><body><article class="page sans"><header><h1 class="page-title">Merging</h1><p class="page-description"></p></header><div class="page-body"><p></p><nav class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#eae4fa54-b646-4fe7-ac14-f1988cb63a35">Definition</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#b76083aa-d7fe-46c5-a5be-b75553bcc438">Merging by Ranking</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#bb24688a-8f6b-4bd3-917b-807958d229a6">Solution 1)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#7b808bc5-f6eb-4ad4-9dce-a4280055577b">Solution 2)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#594ee3c6-1a9d-44b3-8942-a0897ed92513">Solution 3a)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#ba3f729c-43e8-474f-b575-b0436c7511a9">Solution 3b)</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#4bf947e2-372f-449f-b5b9-7ce775ce6528">Merging by Co-ranking</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#26677c4d-17ef-44f9-899c-3ba1c7685e37">Solution 4)</a></div></nav><p></p><h1>Definition</h1><p><mark class="highlight-blue">Problem</mark></p><div class="indented"><p><mark class="highlight-gray">data dependent, adaptive, load balancing - problem</mark></p><p>Input:</p><div class="indented"><p>
Array
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>A</mi></mstyle></mrow><annotation encoding="application/x-tex">\small A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.614997em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5">A</span></span></span></span></span><span>﻿</span></span>
of size
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>n</mi></mstyle></mrow><annotation encoding="application/x-tex">\small n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.387504em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5">n</span></span></span></span></span><span>﻿</span></span>
, Array
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>B</mi></mstyle></mrow><annotation encoding="application/x-tex">\small B</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.614997em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05017em">B</span></span></span></span></span><span>﻿</span></span>
of size
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>m</mi></mstyle></mrow><annotation encoding="application/x-tex">\small m</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.387504em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5">m</span></span></span></span></span><span>﻿</span></span></p><p>
both are sorted
<mark class="highlight-gray">-</mark><mark class="highlight-gray"><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>A</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>≤</mo><mi>A</mi><mo stretchy="false">[</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\small A[i] \leq A[i+1]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">A</span><span class="mopen sizing reset-size6 size5">[</span><span class="mord mathnormal sizing reset-size6 size5">i</span><span class="mclose sizing reset-size6 size5">]</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">≤</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">A</span><span class="mopen sizing reset-size6 size5">[</span><span class="mord mathnormal sizing reset-size6 size5">i</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord sizing reset-size6 size5">1</span><span class="mclose sizing reset-size6 size5">]</span></span></span></span></span><span>﻿</span></span></mark><mark class="highlight-gray">for all</mark><mark class="highlight-gray"><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mn>0</mn><mo>≤</mo><mi>i</mi><mo>≤</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small 0\leq i \leq (n-1)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.702369em; vertical-align: -0.12237300000000001em"></span><span class="mord sizing reset-size6 size5">0</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">≤</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.7159409999999999em; vertical-align: -0.12237300000000001em"></span><span class="mord mathnormal sizing reset-size6 size5">i</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">≤</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">−</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord sizing reset-size6 size5">1</span><span class="mclose sizing reset-size6 size5">)</span></span></span></span></span><span>﻿</span></span></mark></p></div><p></p><p>Output:</p><div class="indented"><p>
Array
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>C</mi></mstyle></mrow><annotation encoding="application/x-tex">\small C</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.614997em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.07153em">C</span></span></span></span></span><span>﻿</span></span>
of size
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>n</mi><mo>+</mo><mi>m</mi></mstyle></mrow><annotation encoding="application/x-tex">\small n+m</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.599994em; vertical-align: -0.07499700000000001em"></span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.387504em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5">m</span></span></span></span></span><span>﻿</span></span>
containing every single element from
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>A</mi><mo separator="true">,</mo><mi>B</mi></mstyle></mrow><annotation encoding="application/x-tex">\small A, B</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.7899930000000001em; vertical-align: -0.174996em"></span><span class="mord mathnormal sizing reset-size6 size5">A</span><span class="mpunct sizing reset-size6 size5">,</span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05017em">B</span></span></span></span></span><span>﻿</span></span></p><p>
sorted
<mark class="highlight-gray">-</mark><mark class="highlight-gray"><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>C</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>≤</mo><mi>C</mi><mo stretchy="false">[</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\small C[i] \leq C[i+1]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.07153em">C</span><span class="mopen sizing reset-size6 size5">[</span><span class="mord mathnormal sizing reset-size6 size5">i</span><span class="mclose sizing reset-size6 size5">]</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">≤</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.07153em">C</span><span class="mopen sizing reset-size6 size5">[</span><span class="mord mathnormal sizing reset-size6 size5">i</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord sizing reset-size6 size5">1</span><span class="mclose sizing reset-size6 size5">]</span></span></span></span></span><span>﻿</span></span></mark><mark class="highlight-gray">for all</mark><mark class="highlight-gray"><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mn>0</mn><mo>≤</mo><mi>i</mi><mo>≤</mo><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small 0\leq i \leq (n+m-1)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.702369em; vertical-align: -0.12237300000000001em"></span><span class="mord sizing reset-size6 size5">0</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">≤</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.7159409999999999em; vertical-align: -0.12237300000000001em"></span><span class="mord mathnormal sizing reset-size6 size5">i</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">≤</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.599994em; vertical-align: -0.07499700000000001em"></span><span class="mord mathnormal sizing reset-size6 size5">m</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">−</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord sizing reset-size6 size5">1</span><span class="mclose sizing reset-size6 size5">)</span></span></span></span></span><span>﻿</span></span></mark></p></div><p></p></div><p></p><p><mark class="highlight-blue">Theorem</mark></p><div class="indented"><p>on “shared memory system” we can achieve parallel time:</p><div class="indented"><p><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="pink"><mstyle mathsize="0.9em"><mtext>Tpar</mtext><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo><mo>∈</mo><mi>O</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mi>p</mi><mo>+</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mstyle></mstyle></mrow><annotation encoding="application/x-tex">
\color{pink} \small \text{Tpar}(p, n+m) \in O((n+m)/p+\log n)
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord text sizing reset-size6 size5" style="color: pink"><span class="mord" style="color: pink">Tpar</span></span><span class="mopen sizing reset-size6 size5" style="color: pink">(</span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">p</span><span class="mpunct sizing reset-size6 size5" style="color: pink">,</span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5" style="color: pink">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">m</span><span class="mclose sizing reset-size6 size5" style="color: pink">)</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5" style="color: pink">∈</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.02778em; color: pink">O</span><span class="mopen sizing reset-size6 size5" style="color: pink">((</span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5" style="color: pink">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">m</span><span class="mclose sizing reset-size6 size5" style="color: pink">)</span><span class="mord sizing reset-size6 size5" style="color: pink">/</span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">p</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5" style="color: pink">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mop sizing reset-size6 size5" style="color: pink"><span style="color: pink">l</span><span style="color: pink">o</span><span style="margin-right: 0.01389em; color: pink">g</span></span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mclose sizing reset-size6 size5" style="color: pink">)</span></span></span></span></span><span>﻿</span></span></p></div><p></p><p><mark class="highlight-gray">
(Convenient to assume “shared-memory programming model” → in “distributed memory programming model” we would need communication and
data redistribution)
</mark></p></div><p></p><p></p><p><mark class="highlight-blue">Distinctness</mark></p><div class="indented"><p>Sometimes useful to assume that all elements are distinct.</p><p>
Assumption does not reduce generalizability: We can make elements distrinct through lexicographical ordering of pairs
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo separator="true">,</mo><mi>i</mi><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small (A[i], i)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">A</span><span class="mopen sizing reset-size6 size5">[</span><span class="mord mathnormal sizing reset-size6 size5">i</span><span class="mclose sizing reset-size6 size5">]</span><span class="mpunct sizing reset-size6 size5">,</span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5">i</span><span class="mclose sizing reset-size6 size5">)</span></span></span></span></span><span>﻿</span></span>
:
</p><div class="indented"><p>
If
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>A</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>≤</mo><mi>A</mi><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\small A[i] \leq A[j]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">A</span><span class="mopen sizing reset-size6 size5">[</span><span class="mord mathnormal sizing reset-size6 size5">i</span><span class="mclose sizing reset-size6 size5">]</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">≤</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">A</span><span class="mopen sizing reset-size6 size5">[</span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05724em">j</span><span class="mclose sizing reset-size6 size5">]</span></span></span></span></span><span>﻿</span></span>
and
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>i</mi><mo>&lt;</mo><mi>j</mi></mstyle></mrow><annotation encoding="application/x-tex">\small i &lt;j</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.628758em; vertical-align: -0.035190000000000006em"></span><span class="mord mathnormal sizing reset-size6 size5">i</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">&lt;</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.768564em; vertical-align: -0.174996em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05724em">j</span></span></span></span></span><span>﻿</span></span>
then:
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo separator="true">,</mo><mi>i</mi><mo stretchy="false">)</mo><mo>&lt;</mo><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small (A[i], i) &lt; (A[j],j)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">A</span><span class="mopen sizing reset-size6 size5">[</span><span class="mord mathnormal sizing reset-size6 size5">i</span><span class="mclose sizing reset-size6 size5">]</span><span class="mpunct sizing reset-size6 size5">,</span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5">i</span><span class="mclose sizing reset-size6 size5">)</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">&lt;</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">A</span><span class="mopen sizing reset-size6 size5">[</span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05724em">j</span><span class="mclose sizing reset-size6 size5">]</span><span class="mpunct sizing reset-size6 size5">,</span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05724em">j</span><span class="mclose sizing reset-size6 size5">)</span></span></span></span></span><span>﻿</span></span></p><p><mark class="highlight-gray">This means, when they are equal, the index decides which one is considered larger</mark></p><p><mark class="highlight-gray">Disadvantage: more memory usage</mark></p></div><p></p></div><p></p><p></p><p><mark class="highlight-blue">Stable merge</mark></p><div class="indented"><p>When original index-order of equal input-elements is preserved in output array.</p><p><mark class="highlight-gray">Stability sometimes desirable ie. Radix sort</mark></p></div><p></p><p></p><p><mark class="highlight-blue">Strictly sequential solution</mark></p><div class="indented"><p><mark class="highlight-gray"><em>this is not the best known solution</em></mark></p><p><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="pink"><mstyle mathsize="0.9em"><mtext>Tseq</mtext><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo><mo>∈</mo><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo></mstyle></mstyle></mrow><annotation encoding="application/x-tex">\color{pink} \small \text{Tseq}(n+m) \in O(n+m)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord text sizing reset-size6 size5" style="color: pink"><span class="mord" style="color: pink">Tseq</span></span><span class="mopen sizing reset-size6 size5" style="color: pink">(</span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5" style="color: pink">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">m</span><span class="mclose sizing reset-size6 size5" style="color: pink">)</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5" style="color: pink">∈</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.02778em; color: pink">O</span><span class="mopen sizing reset-size6 size5" style="color: pink">(</span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5" style="color: pink">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">m</span><span class="mclose sizing reset-size6 size5" style="color: pink">)</span></span></span></span></span><span>﻿</span></span></p><p><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small (n+m)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">m</span><span class="mclose sizing reset-size6 size5">)</span></span></span></span></span><span>﻿</span></span>
read and write operations in total
</p><pre class="code"><code>i = 0; j = 0; k = 0;// pick smaller elem from both arrays
while (i&lt;n &amp;&amp; j&lt;m) {
C[k++] = (A[i]&lt;=B[j]) ? A[i++] : B[j++];
}// fill up the rest, if one array is already eliminated
while (i&lt;n) C[k++] = A[i++];
while (j&lt;m) C[k++] = B[j++];</code></pre></div><p></p><p></p><p></p><h1>Merging by Ranking</h1><p><mark class="highlight-blue"><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mrow><mi mathvariant="monospace">r</mi><mi mathvariant="monospace">a</mi><mi mathvariant="monospace">n</mi><mi mathvariant="monospace">k</mi><mo stretchy="false">(</mo><mi mathvariant="monospace">x</mi><mo separator="true">,</mo><mi mathvariant="monospace">A</mi><mo stretchy="false">)</mo></mrow></mstyle></mrow><annotation encoding="application/x-tex">\small \tt rank(x,A)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord sizing reset-size6 size5"><span class="mord mathtt">rank</span><span class="mopen">(</span><span class="mord mathtt">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathtt">A</span><span class="mclose">)</span></span></span></span></span></span><span>﻿</span></span></mark></p><div class="indented"><p>
= number of elements in
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="monospace">A</mi></mrow><annotation encoding="application/x-tex">\tt A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.61111em; vertical-align: 0em"></span><span class="mord"><span class="mord mathtt">A</span></span></span></span></span></span><span>﻿</span></span>
that are smaller than
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="monospace">x</mi></mrow><annotation encoding="application/x-tex">\tt x</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em"></span><span class="mord"><span class="mord mathtt">x</span></span></span></span></span></span><span>﻿</span></span></p><p>
Can be done sequentually in ordered arrays with binary search
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small O(\log n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.02778em">O</span><span class="mopen sizing reset-size6 size5">(</span><span class="mop sizing reset-size6 size5">
lo
<span style="margin-right: 0.01389em">g</span></span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mclose sizing reset-size6 size5">)</span></span></span></span></span><span>﻿</span></span></p><div class="indented"><p><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>A</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\small A[i]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">A</span><span class="mopen sizing reset-size6 size5">[</span><span class="mord mathnormal sizing reset-size6 size5">i</span><span class="mclose sizing reset-size6 size5">]</span></span></span></span></span><span>﻿</span></span><em><mark class="highlight-gray">written in</mark></em><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>C</mi><mo stretchy="false">[</mo><mi>i</mi><mo>+</mo><mtext mathvariant="monospace">rank</mtext><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo separator="true">,</mo><mi>B</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\small C[i+\texttt{rank}(A[i], B)]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.07153em">C</span><span class="mopen sizing reset-size6 size5">[</span><span class="mord mathnormal sizing reset-size6 size5">i</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord text sizing reset-size6 size5"><span class="mord texttt">rank</span></span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">A</span><span class="mopen sizing reset-size6 size5">[</span><span class="mord mathnormal sizing reset-size6 size5">i</span><span class="mclose sizing reset-size6 size5">]</span><span class="mpunct sizing reset-size6 size5">,</span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05017em">B</span><span class="mclose sizing reset-size6 size5">)]</span></span></span></span></span><span>﻿</span></span></p><p><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>B</mi><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\small B[j]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05017em">B</span><span class="mopen sizing reset-size6 size5">[</span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05724em">j</span><span class="mclose sizing reset-size6 size5">]</span></span></span></span></span><span>﻿</span></span><em><mark class="highlight-gray">written in</mark></em><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>C</mi><mo stretchy="false">[</mo><mi>j</mi><mo>+</mo><mtext mathvariant="monospace">rank</mtext><mo stretchy="false">(</mo><mi>B</mi><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo separator="true">,</mo><mi>A</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\small C[j+\texttt{rank}(B[j], A)]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.07153em">C</span><span class="mopen sizing reset-size6 size5">[</span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05724em">j</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord text sizing reset-size6 size5"><span class="mord texttt">rank</span></span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05017em">B</span><span class="mopen sizing reset-size6 size5">[</span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05724em">j</span><span class="mclose sizing reset-size6 size5">]</span><span class="mpunct sizing reset-size6 size5">,</span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5">A</span><span class="mclose sizing reset-size6 size5">)]</span></span></span></span></span><span>﻿</span></span></p></div><p></p><figure class="block-color-gray_background callout" style="white-space: pre-wrap; display: flex"><div style="font-size: 1.5em"><span class="icon">👉</span></div><div style="width: 100%"><mark class="highlight-gray"><code>rank(A[pos], B)</code></mark><mark class="highlight-gray"></mark>
can be understood as the index of the first element in
<mark class="highlight-gray"><code>B</code></mark>
that is bigger than
<mark class="highlight-gray"><code>A[pos]</code></mark></div></figure></div><p></p><p></p><p><mark class="highlight-blue">Barrier pattern</mark></p><div class="indented"><p>Synchronization pattern</p><p>Explicit synchronization through barrier</p><p>At barrier the processor can’t continue until others have also reached that point.</p></div><p></p><p></p><h2>Solution 1)</h2><p><mark class="highlight-blue">Solution 1)</mark></p><div class="indented"><p><mark class="highlight-gray">Explicit paralelization: We tell each processor what to do</mark></p><p>
One processor per element:
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>p</mi><mo>=</mo><mi>n</mi><mo>+</mo><mi>m</mi></mstyle></mrow><annotation encoding="application/x-tex">\small p = n+m</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.5625em; vertical-align: -0.174996em"></span><span class="mord mathnormal sizing reset-size6 size5">p</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">=</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.599994em; vertical-align: -0.07499700000000001em"></span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.387504em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5">m</span></span></span></span></span><span>﻿</span></span></p><div class="indented"><p>
Processor
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>i</mi><mo separator="true">,</mo><mspace width="1em"></mspace><mn>0</mn><mo>≤</mo><mi>i</mi><mo>&lt;</mo><mi>n</mi></mstyle></mrow><annotation encoding="application/x-tex">\small i, \quad 0\leq i &lt; n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.768564em; vertical-align: -0.174996em"></span><span class="mord mathnormal sizing reset-size6 size5">i</span><span class="mpunct sizing reset-size6 size5">,</span><span class="mspace sizing reset-size6 size5" style="margin-right: 1em"></span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord sizing reset-size6 size5">0</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">≤</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.628758em; vertical-align: -0.035190000000000006em"></span><span class="mord mathnormal sizing reset-size6 size5">i</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">&lt;</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.387504em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5">n</span></span></span></span></span><span>﻿</span></span>
assigned to
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>A</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\small A[i]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">A</span><span class="mopen sizing reset-size6 size5">[</span><span class="mord mathnormal sizing reset-size6 size5">i</span><span class="mclose sizing reset-size6 size5">]</span></span></span></span></span><span>﻿</span></span></p><p>
Processor
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>j</mi><mo separator="true">,</mo><mspace width="1em"></mspace><mi>n</mi><mo>≤</mo><mi>j</mi><mo>&lt;</mo><mi>n</mi><mo>+</mo><mi>m</mi></mstyle></mrow><annotation encoding="application/x-tex">\small j, \quad n\leq j&lt; n+m</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.768564em; vertical-align: -0.174996em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05724em">j</span><span class="mpunct sizing reset-size6 size5">,</span><span class="mspace sizing reset-size6 size5" style="margin-right: 1em"></span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">≤</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.768564em; vertical-align: -0.174996em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05724em">j</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">&lt;</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.599994em; vertical-align: -0.07499700000000001em"></span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.387504em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5">m</span></span></span></span></span><span>﻿</span></span>
assigned to
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>B</mi><mo stretchy="false">[</mo><mi>j</mi><mo>−</mo><mi>n</mi><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\small B[j-n]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05017em">B</span><span class="mopen sizing reset-size6 size5">[</span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05724em">j</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">−</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mclose sizing reset-size6 size5">]</span></span></span></span></span><span>﻿</span></span></p></div><p></p><pre class="code"><code>par (0 &lt;= i &lt; n+m) {
if (i &lt; n) {
// Array A
C[i+rank(A[i],B)] = A[i];} else if (i &lt; n+m) {
// Array B
j = i-n;
C[j+rank(B[j],A)] = B[j];
}barrier; // synchronization construct so that any C[k] can be accessed
}</code></pre></div><p></p><p>The algorithm is not efficient:</p><div class="indented"><p><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="pink"><mstyle mathsize="0.9em"><mtext>Tpar</mtext><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo separator="true">,</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo><mo>∈</mo><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>max</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>n</mi><mo separator="true">,</mo><mi>m</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mstyle></mstyle></mrow><annotation encoding="application/x-tex">
\color{pink} \small \text{Tpar}(n+m, n+m) \in O(\log(\max(n,m)))
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord text sizing reset-size6 size5" style="color: pink"><span class="mord" style="color: pink">Tpar</span></span><span class="mopen sizing reset-size6 size5" style="color: pink">(</span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5" style="color: pink">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.6999930000000001em; vertical-align: -0.174996em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">m</span><span class="mpunct sizing reset-size6 size5" style="color: pink">,</span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5" style="color: pink">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">m</span><span class="mclose sizing reset-size6 size5" style="color: pink">)</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5" style="color: pink">∈</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.02778em; color: pink">O</span><span class="mopen sizing reset-size6 size5" style="color: pink">(</span><span class="mop sizing reset-size6 size5" style="color: pink"><span style="color: pink">l</span><span style="color: pink">o</span><span style="margin-right: 0.01389em; color: pink">g</span></span><span class="mopen sizing reset-size6 size5" style="color: pink">(</span><span class="mop sizing reset-size6 size5" style="color: pink"><span style="color: pink">m</span><span style="color: pink">a</span><span style="color: pink">x</span></span><span class="mopen sizing reset-size6 size5" style="color: pink">(</span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mpunct sizing reset-size6 size5" style="color: pink">,</span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">m</span><span class="mclose sizing reset-size6 size5" style="color: pink">)))</span></span></span></span></span><span>﻿</span></span></p><div class="indented"><p>Exponential improvement in time with linear number of processors</p></div><p></p><p><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mstyle mathcolor="pink"><mtext>Wpar</mtext><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo separator="true">,</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo><mo>∈</mo></mstyle><mi>O</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>m</mi><mo>+</mo><mi>n</mi><mo stretchy="false">)</mo><mo>⋅</mo><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>max</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>m</mi><mo separator="true">,</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>≤</mo><mi>O</mi><mo stretchy="false">(</mo><mn>2</mn><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mstyle mathcolor="pink"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mstyle></mstyle></mrow><annotation encoding="application/x-tex">
\small \textcolor{pink} {\text{Wpar}(n+m, n+m) \in }O((m+n)\cdot \log(\max(m,n))) \leq O(2n \log n) =
\textcolor{pink} {O(n\log n)}
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord text sizing reset-size6 size5" style="color: pink"><span class="mord" style="color: pink">Wpar</span></span><span class="mopen sizing reset-size6 size5" style="color: pink">(</span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5" style="color: pink">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.6999930000000001em; vertical-align: -0.174996em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">m</span><span class="mpunct sizing reset-size6 size5" style="color: pink">,</span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5" style="color: pink">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">m</span><span class="mclose sizing reset-size6 size5" style="color: pink">)</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5" style="color: pink">∈</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.02778em">O</span><span class="mopen sizing reset-size6 size5">((</span><span class="mord mathnormal sizing reset-size6 size5">m</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mclose sizing reset-size6 size5">)</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">⋅</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mop sizing reset-size6 size5">
lo
<span style="margin-right: 0.01389em">g</span></span><span class="mopen sizing reset-size6 size5">(</span><span class="mop sizing reset-size6 size5">max</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">m</span><span class="mpunct sizing reset-size6 size5">,</span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mclose sizing reset-size6 size5">)))</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">≤</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.02778em">O</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord sizing reset-size6 size5">2</span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mop sizing reset-size6 size5">
lo
<span style="margin-right: 0.01389em">g</span></span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mclose sizing reset-size6 size5">)</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">=</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.02778em; color: pink">O</span><span class="mopen sizing reset-size6 size5" style="color: pink">(</span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mop sizing reset-size6 size5" style="color: pink"><span style="color: pink">l</span><span style="color: pink">o</span><span style="margin-right: 0.01389em; color: pink">g</span></span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mclose sizing reset-size6 size5" style="color: pink">)</span></span></span></span></span><span>﻿</span></span></p><div class="indented"><p>Not work-optimal</p></div><p></p><p><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mstyle mathcolor="pink"><msub><mi>S</mi><mi>p</mi></msub><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo></mstyle><mstyle mathsize="1.2em"><mfrac><mrow><mtext>Tseq</mtext><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><mrow><mtext>Tpar</mtext><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><mi>n</mi><mo stretchy="false">)</mo></mrow></mfrac><mstyle mathsize="0.9em"><mo>=</mo><mstyle mathsize="1.2em"><mfrac><mrow><mi>n</mi><mo>+</mo><mi>m</mi></mrow><mrow><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>max</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>m</mi><mo separator="true">,</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow></mfrac><mstyle mathsize="0.9em"><mo>=</mo><mo>⋯</mo><mo>=</mo><mstyle mathcolor="pink"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mi>p</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>p</mi><mi mathvariant="normal">/</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mstyle></mstyle></mstyle></mstyle></mstyle></mstyle></mrow><annotation encoding="application/x-tex">
\small \textcolor{pink} {S_p(n) = }\large \frac{\text{Tseq}(n)}{\text{Tpar}(p,n)} \small = \large \frac{
n+m}{\log(\max(m,n))} \small = \dots = \textcolor{pink} {O(n / (n \log n) / p) = O(p / \log n)}
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9266640000000002em; vertical-align: -0.25166400000000005em"></span><span class="mord sizing reset-size6 size5" style="color: pink"><span class="mord mathnormal" style="margin-right: 0.05764em; color: pink">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.13703999999999994em"><span style="top: -2.45em; margin-left: -0.05764em; margin-right: 0.05555555555555556em"><span class="pstrut" style="height: 2.6em"></span><span class="sizing reset-size5 size2 mtight" style="color: pink"><span class="mord mathnormal mtight" style="color: pink">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2796266666666667em"><span></span></span></span></span></span></span><span class="mopen sizing reset-size6 size5" style="color: pink">(</span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mclose sizing reset-size6 size5" style="color: pink">)</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5" style="color: pink">=</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 1.7860000000000003em; vertical-align: -0.6140000000000001em"></span><span class="mord sizing reset-size6 size7"><span class="mopen nulldelimiter sizing reset-size7 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.9766666666666668em"><span style="top: -2.655em"><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size7 size4 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">Tpar</span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">p</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">n</span><span class="mclose mtight">)</span></span></span></span><span style="top: -3.23em"><span class="pstrut" style="height: 3em"></span><span class="frac-line" style="border-bottom-width: 0.04em"></span></span><span style="top: -3.4766666666666666em"><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size7 size4 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">Tseq</span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.5116666666666667em"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size7 size6"></span></span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">=</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 1.553464em; vertical-align: -0.6140000000000001em"></span><span class="mord sizing reset-size6 size7"><span class="mopen nulldelimiter sizing reset-size7 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.7828866666666667em"><span style="top: -2.655em"><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size7 size4 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right: 0.01389em">g</span></span><span class="mopen mtight">(</span><span class="mop mtight"><span class="mtight">m</span><span class="mtight">a</span><span class="mtight">x</span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">m</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">n</span><span class="mclose mtight">))</span></span></span></span><span style="top: -3.23em"><span class="pstrut" style="height: 3em"></span><span class="frac-line" style="border-bottom-width: 0.04em"></span></span><span style="top: -3.394em"><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size7 size4 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.5116666666666667em"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size7 size6"></span></span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">=</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.3301829999999999em; vertical-align: 0em"></span><span class="minner sizing reset-size6 size5">⋯</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">=</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.02778em; color: pink">O</span><span class="mopen sizing reset-size6 size5" style="color: pink">(</span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mord sizing reset-size6 size5" style="color: pink">/</span><span class="mopen sizing reset-size6 size5" style="color: pink">(</span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mop sizing reset-size6 size5" style="color: pink"><span style="color: pink">l</span><span style="color: pink">o</span><span style="margin-right: 0.01389em; color: pink">g</span></span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mclose sizing reset-size6 size5" style="color: pink">)</span><span class="mord sizing reset-size6 size5" style="color: pink">/</span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">p</span><span class="mclose sizing reset-size6 size5" style="color: pink">)</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5" style="color: pink">=</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.02778em; color: pink">O</span><span class="mopen sizing reset-size6 size5" style="color: pink">(</span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">p</span><span class="mord sizing reset-size6 size5" style="color: pink">/</span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mop sizing reset-size6 size5" style="color: pink"><span style="color: pink">l</span><span style="color: pink">o</span><span style="margin-right: 0.01389em; color: pink">g</span></span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mclose sizing reset-size6 size5" style="color: pink">)</span></span></span></span></span><span>﻿</span></span></p><div class="indented"><p>
Speedup is bad. It decreases with with
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>n</mi></mstyle></mrow><annotation encoding="application/x-tex">\small n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.387504em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5">n</span></span></span></span></span><span>﻿</span></span>
.
</p><p>
Normally
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>n</mi><mo>≫</mo><mi>p</mi></mstyle></mrow><annotation encoding="application/x-tex">\small n \gg p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.5203800000000001em; vertical-align: -0.035190000000000006em"></span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">≫</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.5625em; vertical-align: -0.174996em"></span><span class="mord mathnormal sizing reset-size6 size5">p</span></span></span></span></span><span>﻿</span></span></p></div><p></p></div><p></p><figure class="image"><a href="Merging%20573a2da811d849c0bf5c7d1cd9bc4b79/Untitled.png"><img src="Merging%20573a2da811d849c0bf5c7d1cd9bc4b79/Untitled.png" style="width: 336px"/></a></figure><p></p><h2>Solution 2)</h2><figure class="block-color-gray_background callout" style="white-space: pre-wrap; display: flex"><div style="font-size: 1.5em"><span class="icon">👉</span></div><div style="width: 100%">Improve performance</div></figure><p><mark class="highlight-blue">Solution 2)</mark></p><div class="indented"><p>
Divide
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>A</mi></mstyle></mrow><annotation encoding="application/x-tex">\small A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.614997em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5">A</span></span></span></span></span><span>﻿</span></span>
into blocks of
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mo>≈</mo><mi>n</mi><mi mathvariant="normal">/</mi><mi>p</mi></mstyle></mrow><annotation encoding="application/x-tex">\small \approx n/p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.43480800000000003em; vertical-align: 0em"></span><span class="mrel sizing reset-size6 size5">≈</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mord sizing reset-size6 size5">/</span><span class="mord mathnormal sizing reset-size6 size5">p</span></span></span></span></span><span>﻿</span></span>
, then rank the start and end of each block.
</p><p>
We find the matching block in
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>B</mi></mstyle></mrow><annotation encoding="application/x-tex">\small B</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.614997em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05017em">B</span></span></span></span></span><span>﻿</span></span>
for each block in
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>A</mi></mstyle></mrow><annotation encoding="application/x-tex">\small A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.614997em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5">A</span></span></span></span></span><span>﻿</span></span>
.
</p><div class="indented"><p><mark class="highlight-gray">Number of processors does not depend on Input.</mark></p><p><mark class="highlight-gray">Assumes</mark><mark class="highlight-gray"><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>n</mi></mstyle></mrow><annotation encoding="application/x-tex">\small n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.387504em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5">n</span></span></span></span></span><span>﻿</span></span></mark><mark class="highlight-gray">is divisible by</mark><mark class="highlight-gray"><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>p</mi></mstyle></mrow><annotation encoding="application/x-tex">\small p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.5625em; vertical-align: -0.174996em"></span><span class="mord mathnormal sizing reset-size6 size5">p</span></span></span></span></span><span>﻿</span></span></mark><mark class="highlight-gray">(can be fixed if not the case).</mark></p></div><p></p><p>
We then merge blocks of
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>A</mi><mo separator="true">,</mo><mi>B</mi></mstyle></mrow><annotation encoding="application/x-tex">\small A,B</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.7899930000000001em; vertical-align: -0.174996em"></span><span class="mord mathnormal sizing reset-size6 size5">A</span><span class="mpunct sizing reset-size6 size5">,</span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05017em">B</span></span></span></span></span><span>﻿</span></span>
sequentially.
</p><div class="indented"><p><mark class="highlight-gray"><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mrow><mi mathvariant="monospace">m</mi><mi mathvariant="monospace">e</mi><mi mathvariant="monospace">r</mi><mi mathvariant="monospace">g</mi><mi mathvariant="monospace">e</mi></mrow></mstyle></mrow><annotation encoding="application/x-tex">\small \tt merge</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.587502em; vertical-align: -0.199998em"></span><span class="mord sizing reset-size6 size5"><span class="mord mathtt">merge</span></span></span></span></span></span><span>﻿</span></span></mark><mark class="highlight-gray">and</mark><mark class="highlight-gray"><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mrow><mi mathvariant="monospace">r</mi><mi mathvariant="monospace">a</mi><mi mathvariant="monospace">n</mi><mi mathvariant="monospace">k</mi></mrow></mstyle></mrow><annotation encoding="application/x-tex">\small \tt rank</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.549999em; vertical-align: 0em"></span><span class="mord sizing reset-size6 size5"><span class="mord mathtt">rank</span></span></span></span></span></span><span>﻿</span></span></mark><mark class="highlight-gray">are sequential algorithms.</mark></p></div><p></p><pre class="code"><code>par (0 &lt;= i &lt; p) {
pos = i*(n/p);
nextPos = (i+1)*n/p;// sequential merge
merge (
// &amp; → Address of ...
&amp;A[pos],                               // interval start in A
n/p,                                   // n (interval size in A)
&amp;B[rank(A[pos],B)],                    // interval start in B
rank(A[nextPos],B) - rank(A[pos],B),   // m (interval size in B)
&amp;C[pos + rank(A[pos],B)]               // interval start in C
);
barrier;
}</code></pre><p><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="pink"><mstyle mathsize="0.9em"><mtext>Tpar</mtext><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi mathvariant="normal">/</mi><mi>p</mi><mo>+</mo><mi>m</mi><mo>+</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mstyle></mstyle></mrow><annotation encoding="application/x-tex">\color{pink} \small \text{Tpar}(p,n+m) = O(n/p+m+\log n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord text sizing reset-size6 size5" style="color: pink"><span class="mord" style="color: pink">Tpar</span></span><span class="mopen sizing reset-size6 size5" style="color: pink">(</span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">p</span><span class="mpunct sizing reset-size6 size5" style="color: pink">,</span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5" style="color: pink">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">m</span><span class="mclose sizing reset-size6 size5" style="color: pink">)</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5" style="color: pink">=</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.02778em; color: pink">O</span><span class="mopen sizing reset-size6 size5" style="color: pink">(</span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mord sizing reset-size6 size5" style="color: pink">/</span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">p</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5" style="color: pink">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.599994em; vertical-align: -0.07499700000000001em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">m</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5" style="color: pink">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mop sizing reset-size6 size5" style="color: pink"><span style="color: pink">l</span><span style="color: pink">o</span><span style="margin-right: 0.01389em; color: pink">g</span></span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mclose sizing reset-size6 size5" style="color: pink">)</span></span></span></span></span><span>﻿</span></span></p><div class="indented"><p>
There can be
<span style="border-bottom: 0.05em solid">severe load imbalance</span>
where one processor does all the work, because the intervall in
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>A</mi></mstyle></mrow><annotation encoding="application/x-tex">\small A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.614997em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5">A</span></span></span></span></span><span>﻿</span></span>
gets mapped to a huge chunk in
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>B</mi></mstyle></mrow><annotation encoding="application/x-tex">\small B</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.614997em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05017em">B</span></span></span></span></span><span>﻿</span></span>
.
</p></div><p></p><p><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mstyle mathcolor="pink"><mtext>Wpar</mtext><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo><mo>=</mo></mstyle><mi>O</mi><mo stretchy="false">(</mo><mi>p</mi><mi>log</mi><mo>⁡</mo><mi>m</mi><mo>+</mo><mi>p</mi><mo>⋅</mo><mo stretchy="false">(</mo><mi>n</mi><mi mathvariant="normal">/</mi><mi>p</mi><mo stretchy="false">)</mo><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>p</mi><mi>log</mi><mo>⁡</mo><mi>m</mi><mo>+</mo><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>=</mo><mstyle mathcolor="pink"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo></mstyle></mstyle></mrow><annotation encoding="application/x-tex">
\small \textcolor{pink} {\text{Wpar}(p,n+m) =} O(p \log m + p \cdot (n/p)+m) = O(p \log m + (n+m)) =
\textcolor{pink} {O(n+m)}
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord text sizing reset-size6 size5" style="color: pink"><span class="mord" style="color: pink">Wpar</span></span><span class="mopen sizing reset-size6 size5" style="color: pink">(</span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">p</span><span class="mpunct sizing reset-size6 size5" style="color: pink">,</span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5" style="color: pink">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">m</span><span class="mclose sizing reset-size6 size5" style="color: pink">)</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5" style="color: pink">=</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.02778em">O</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">p</span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mop sizing reset-size6 size5">
lo
<span style="margin-right: 0.01389em">g</span></span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5">m</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.575001em; vertical-align: -0.174996em"></span><span class="mord mathnormal sizing reset-size6 size5">p</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">⋅</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mord sizing reset-size6 size5">/</span><span class="mord mathnormal sizing reset-size6 size5">p</span><span class="mclose sizing reset-size6 size5">)</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">m</span><span class="mclose sizing reset-size6 size5">)</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">=</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.02778em">O</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">p</span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mop sizing reset-size6 size5">
lo
<span style="margin-right: 0.01389em">g</span></span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5">m</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">m</span><span class="mclose sizing reset-size6 size5">))</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">=</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.02778em; color: pink">O</span><span class="mopen sizing reset-size6 size5" style="color: pink">(</span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5" style="color: pink">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">m</span><span class="mclose sizing reset-size6 size5" style="color: pink">)</span></span></span></span></span><span>﻿</span></span></p><div class="indented"><p>
Work-optimal for
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>p</mi><mo>≤</mo><mstyle mathsize="1.2em"><mfrac><mrow><mi>m</mi><mo>+</mo><mi>n</mi></mrow><mrow><mi>log</mi><mo>⁡</mo><mi>m</mi></mrow></mfrac></mstyle></mstyle></mrow><annotation encoding="application/x-tex">\small p \leq \large \frac{m+n}{\log m}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.7473690000000001em; vertical-align: -0.174996em"></span><span class="mord mathnormal sizing reset-size6 size5">p</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">≤</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 1.509016em; vertical-align: -0.569552em"></span><span class="mord sizing reset-size6 size7"><span class="mopen nulldelimiter sizing reset-size7 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.7828866666666667em"><span style="top: -2.6550000000000002em"><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size7 size4 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right: 0.01389em">g</span></span><span class="mspace mtight" style="margin-right: 0.19516666666666668em"></span><span class="mord mathnormal mtight">m</span></span></span></span><span style="top: -3.23em"><span class="pstrut" style="height: 3em"></span><span class="frac-line" style="border-bottom-width: 0.04em"></span></span><span style="top: -3.394em"><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size7 size4 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.47462666666666664em"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size7 size6"></span></span></span></span></span></span><span>﻿</span></span></p></div><p></p></div><p></p><figure class="image"><a href="Merging%20573a2da811d849c0bf5c7d1cd9bc4b79/Untitled%201.png"><img src="Merging%20573a2da811d849c0bf5c7d1cd9bc4b79/Untitled%201.png" style="width: 336px"/></a><figcaption>Balanced</figcaption></figure><figure class="image"><a href="Merging%20573a2da811d849c0bf5c7d1cd9bc4b79/Untitled%202.png"><img src="Merging%20573a2da811d849c0bf5c7d1cd9bc4b79/Untitled%202.png" style="width: 336px"/></a><figcaption>Imbalanced</figcaption></figure><p></p><h2>Solution 3a)</h2><figure class="block-color-gray_background callout" style="white-space: pre-wrap; display: flex"><div style="font-size: 1.5em"><span class="icon">👉</span></div><div style="width: 100%">Fix load imbalance</div></figure><p><mark class="highlight-blue">Solution 3a)</mark></p><div class="indented"><p>
Divide
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>A</mi></mstyle></mrow><annotation encoding="application/x-tex">\small A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.614997em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5">A</span></span></span></span></span><span>﻿</span></span>
into blocks of
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mo>≈</mo><mi>n</mi><mi mathvariant="normal">/</mi><mi>p</mi></mstyle></mrow><annotation encoding="application/x-tex">\small \approx n/p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.43480800000000003em; vertical-align: 0em"></span><span class="mrel sizing reset-size6 size5">≈</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mord sizing reset-size6 size5">/</span><span class="mord mathnormal sizing reset-size6 size5">p</span></span></span></span></span><span>﻿</span></span>
, then rank the start and end of each block.
</p><p>
Differentiate between good and bad segments
<span style="border-bottom: 0.05em solid">in</span><span style="border-bottom: 0.05em solid"><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>B</mi></mstyle></mrow><annotation encoding="application/x-tex">\small B</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.614997em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05017em">B</span></span></span></span></span><span>﻿</span></span></span>
:
</p><div class="indented"><p><mark class="highlight-gray"><code>good segments :</code></mark><mark class="highlight-teal"><code>rank(A[nextPos],B)</code></mark><mark class="highlight-gray"><code>-</code></mark><mark class="highlight-pink"><code>rank(A[pos],B)</code></mark><mark class="highlight-gray"><code>≤ m/p</code></mark></p><div class="indented"><p>balanced pairs</p><p>Do sequential merge</p></div><p></p><p><mark class="highlight-gray"><code>bad segments :</code></mark><mark class="highlight-teal"><code>rank(A[nextPos],B)</code></mark><mark class="highlight-gray"><code>-</code></mark><mark class="highlight-pink"><code>rank(A[pos],B)</code></mark><mark class="highlight-gray"><code>&gt; m/p</code></mark></p><div class="indented"><p>
unbalanced pairs → divide intervall in
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>B</mi></mstyle></mrow><annotation encoding="application/x-tex">\small B</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.614997em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05017em">B</span></span></span></span></span><span>﻿</span></span>
into smaller blocks and find their partner-block in
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>A</mi></mstyle></mrow><annotation encoding="application/x-tex">\small A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.614997em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5">A</span></span></span></span></span><span>﻿</span></span><mark class="highlight-gray">(means also splitting</mark><mark class="highlight-gray"><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>A</mi></mstyle></mrow><annotation encoding="application/x-tex">\small A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.614997em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5">A</span></span></span></span></span><span>﻿</span></span></mark><mark class="highlight-gray">up)</mark>
.
</p><p><mark class="highlight-gray">This way we</mark><em><mark class="highlight-gray">reassign</mark></em><mark class="highlight-gray">processors to the start-indices of the blocks which is problematic.</mark></p><p><mark class="highlight-gray">In case there is more than one bad segment we use prefix-sums (see below).</mark></p></div><p></p></div><p></p><hr/><p>
This way there are at most
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>p</mi></mstyle></mrow><annotation encoding="application/x-tex">\small p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.5625em; vertical-align: -0.174996em"></span><span class="mord mathnormal sizing reset-size6 size5">p</span></span></span></span></span><span>﻿</span></span>
smaller merge-pairs all of size
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi mathvariant="normal">/</mi><mi>p</mi><mo>+</mo><mi>m</mi><mi mathvariant="normal">/</mi><mi>p</mi><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small O(n/p+m/p)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.02778em">O</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mord sizing reset-size6 size5">/</span><span class="mord mathnormal sizing reset-size6 size5">p</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">m</span><span class="mord sizing reset-size6 size5">/</span><span class="mord mathnormal sizing reset-size6 size5">p</span><span class="mclose sizing reset-size6 size5">)</span></span></span></span></span><span>﻿</span></span></p></div><p></p><figure class="image"><a href="Merging%20573a2da811d849c0bf5c7d1cd9bc4b79/Untitled%203.png"><img src="Merging%20573a2da811d849c0bf5c7d1cd9bc4b79/Untitled%203.png" style="width: 336px"/></a><figcaption>
One old block in
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>A</mi></mstyle></mrow><annotation encoding="application/x-tex">\small A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.614997em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5">A</span></span></span></span></span><span>﻿</span></span>
now can get multiple partner blocks in
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>B</mi></mstyle></mrow><annotation encoding="application/x-tex">\small B</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.614997em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05017em">B</span></span></span></span></span><span>﻿</span></span>
in case the block in
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>B</mi></mstyle></mrow><annotation encoding="application/x-tex">\small B</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.614997em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05017em">B</span></span></span></span></span><span>﻿</span></span>
has a size
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mo>&gt;</mo><mi>m</mi><mi mathvariant="normal">/</mi><mi>p</mi></mstyle></mrow><annotation encoding="application/x-tex">\small &gt; m/p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.5203800000000001em; vertical-align: -0.035190000000000006em"></span><span class="mrel sizing reset-size6 size5">&gt;</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">m</span><span class="mord sizing reset-size6 size5">/</span><span class="mord mathnormal sizing reset-size6 size5">p</span></span></span></span></span><span>﻿</span></span>
.
</figcaption></figure><p></p><h2>Solution 3b)</h2><figure class="block-color-gray_background callout" style="white-space: pre-wrap; display: flex"><div style="font-size: 1.5em"><span class="icon">👉</span></div><div style="width: 100%">Avoid load imbalance</div></figure><p><mark class="highlight-blue">Solution 3b)</mark></p><div class="indented"><p>
Divide
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>A</mi></mstyle></mrow><annotation encoding="application/x-tex">\small A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.614997em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5">A</span></span></span></span></span><span>﻿</span></span>
into blocks of
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mo>≈</mo><mi>n</mi><mi mathvariant="normal">/</mi><mi>p</mi></mstyle></mrow><annotation encoding="application/x-tex">\small \approx n/p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.43480800000000003em; vertical-align: 0em"></span><span class="mrel sizing reset-size6 size5">≈</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mord sizing reset-size6 size5">/</span><span class="mord mathnormal sizing reset-size6 size5">p</span></span></span></span></span><span>﻿</span></span></p><p>
Divide
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>B</mi></mstyle></mrow><annotation encoding="application/x-tex">\small B</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.614997em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.05017em">B</span></span></span></span></span><span>﻿</span></span>
into blocks of
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mo>≈</mo><mi>m</mi><mi mathvariant="normal">/</mi><mi>p</mi></mstyle></mrow><annotation encoding="application/x-tex">\small \approx m/p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.43480800000000003em; vertical-align: 0em"></span><span class="mrel sizing reset-size6 size5">≈</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">m</span><span class="mord sizing reset-size6 size5">/</span><span class="mord mathnormal sizing reset-size6 size5">p</span></span></span></span></span><span>﻿</span></span></p><hr/><p>
This gives
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>p</mi></mstyle></mrow><annotation encoding="application/x-tex">\small p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.5625em; vertical-align: -0.174996em"></span><span class="mord mathnormal sizing reset-size6 size5">p</span></span></span></span></span><span>﻿</span></span><em>independent</em>
merge-pairs all of size
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi mathvariant="normal">/</mi><mi>p</mi><mo>+</mo><mi>m</mi><mi mathvariant="normal">/</mi><mi>p</mi><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small O(n/p+m/p)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.02778em">O</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mord sizing reset-size6 size5">/</span><span class="mord mathnormal sizing reset-size6 size5">p</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">m</span><span class="mord sizing reset-size6 size5">/</span><span class="mord mathnormal sizing reset-size6 size5">p</span><span class="mclose sizing reset-size6 size5">)</span></span></span></span></span><span>﻿</span></span></p><p>Experience shows that the pairs are usually independent from eachother (but we could potentially do twice the work).</p></div><p></p><figure class="image"><a href="Merging%20573a2da811d849c0bf5c7d1cd9bc4b79/Untitled%204.png"><img src="Merging%20573a2da811d849c0bf5c7d1cd9bc4b79/Untitled%204.png" style="width: 336px"/></a><figcaption>One block can get mapped to an intervall outside of its partner-block</figcaption></figure><p></p><p></p><h1>Merging by Co-ranking</h1><p><mark class="highlight-blue">Co-Ranks</mark></p><div class="indented"><p><mark class="highlight-gray"><code>j(i), k(i)</code></mark><mark class="highlight-gray"></mark>
are the co-ranks of segment
<mark class="highlight-gray"><code>i</code></mark></p><div class="indented"><p><mark class="highlight-gray"><code>A[j(i), j(i+1)-1]</code></mark><mark class="highlight-gray"></mark>
and
<mark class="highlight-gray"><code>B[k(i),k(i+1)-1]</code></mark><em><mark class="highlight-gray"></mark></em><em>— merged —→</em><mark class="highlight-gray"></mark><code><mark class="highlight-gray">C[i*(n+m)/p, (i+1)*(n+m)/p-1]</mark></code></p></div><p></p><p>
They satisfy:
<mark class="highlight-gray"><code>j(i) + k(i) = i*(n+m)/p</code></mark></p><figure class="block-color-gray_background callout" style="white-space: pre-wrap; display: flex"><div style="font-size: 1.5em"><span class="icon">💡</span></div><div style="width: 100%">
Co-Ranks can be understood as the indices in
<mark class="highlight-gray"><code>A</code></mark>
,
<mark class="highlight-gray"><code>B</code></mark><mark class="highlight-gray"></mark>
from which the merging of segment
<mark class="highlight-gray"><code>i</code></mark><mark class="highlight-gray">(with index</mark><mark class="highlight-gray"><code>i*(n+m)/p</code></mark><mark class="highlight-gray">)</mark>
starts.
</div></figure></div><p></p><figure class="image"><a href="Merging%20573a2da811d849c0bf5c7d1cd9bc4b79/Untitled%205.png"><img src="Merging%20573a2da811d849c0bf5c7d1cd9bc4b79/Untitled%205.png" style="width: 240px"/></a></figure><p></p><ul class="toggle"><li><details open=""><summary>Example</summary><p><mark class="highlight-gray"><code>A[j(i), j(i+1)-1]</code></mark><mark class="highlight-gray">and</mark><mark class="highlight-gray"><code>B[k(i),k(i+1)-1]</code></mark><mark class="highlight-gray">— merged —→</mark><code><mark class="highlight-gray">C[i*(n+m)/p, (i+1)*(n+m)/p-1]</mark></code></p><p></p><pre class="code"><code>A [0, 2, 4, 6]
B [1, 3, 5, 7]
\___/  \___/
0      1     &lt;- segments (for each processor)C [0, 1, 2, 3, 4, 5, 6, 7]
\_________/  \_________/
0            1       &lt;- segments (for each processor)</code></pre><p>
Lets say we have 2 processors
<mark class="highlight-gray"><code>p = 2</code></mark>
and each of them gets a segment of
<mark class="highlight-gray"><code>C</code></mark>
:
</p><div class="indented"><p><mark class="highlight-gray"><code>n = 4</code></mark>
,
<mark class="highlight-gray"><code>m = 4</code></mark><mark class="highlight-gray">→</mark>
Length of each segment:
<mark class="highlight-gray"><code>(n+m)/p = 4</code></mark></p><p></p></div><p></p><p>We calculate the beginning and end of the segment dedicated to each processor:</p><div class="indented"><p><mark class="highlight-gray"><code>p_0</code></mark>
dedicated to segment
<code>i=0</code>
:
<mark class="highlight-gray"><code>C[0*(n+m)/p; 1*(n+m)/p-1] =</code></mark><code>C[0;3]</code></p><p><mark class="highlight-gray"><code>p_1</code></mark>
dedicated to segment
<code>i=1</code>
:
<mark class="highlight-gray"><code>C[1*(n+m)/p; 2*(n+m)/p-1] =</code></mark><code>C[4;7]</code></p></div><p></p><p></p><p>
We want to find the pair-segments from
<mark class="highlight-gray"><code>A, B</code></mark><mark class="highlight-gray"></mark>
that will be merged into our segment in
<mark class="highlight-gray"><code>C</code></mark>
:
</p><p>
🪄
<em>magic calculation</em></p><div class="indented"><p>
For
<code>i = 0</code></p><div class="indented"><p><mark class="highlight-gray"><code>j(0) = 0</code></mark></p><p><mark class="highlight-gray"><code>k(0) = 0</code></mark></p><p>
Check of invariant:
<mark class="highlight-gray"><code>j(0) + k(0) = 0*(n+m)/p = 0</code></mark></p></div><p></p><p>
For
<code>i = 1</code></p><div class="indented"><p><mark class="highlight-gray"><code>j(1) = 2</code></mark></p><p><mark class="highlight-gray"><code>k(1) = 2</code></mark></p><p>
Check of invariant:
<mark class="highlight-gray"><code>j(1) + k(1) = 1*(n+m)/p = 4</code></mark></p></div><p></p><p>
For
<code>i = 2</code></p><div class="indented"><p><mark class="highlight-gray"><code>j(2) = 4</code></mark></p><p><mark class="highlight-gray"><code>k(2) = 4</code></mark></p><p>
Check of invariant:
<mark class="highlight-gray"><code>j(2) + k(2) = 2*(n+m)/p = 8</code></mark></p></div><p></p></div><p></p><hr/><p>Now we know:</p><div class="indented"><p><code>i = 0</code><mark class="highlight-gray"></mark>
→
<code>C[0;3]</code><mark class="highlight-gray"></mark>
is merged from
</p><div class="indented"><p><mark class="highlight-gray"><code>A[j(0); j(0+1)-1]</code></mark><mark class="highlight-gray"></mark>
and
<mark class="highlight-gray"><code>B[k(0); k(0+1)-1]</code></mark></p><p><code>A[0; 1]</code><mark class="highlight-gray"></mark>
and
<code>B[0; 1]</code></p></div><p></p><p><code>i = 1</code><mark class="highlight-gray"></mark>
→
<code>C[4;7]</code><mark class="highlight-gray"></mark>
is merged from
</p><div class="indented"><p><mark class="highlight-gray"><code>A[j(1); j(1+1)-1]</code></mark><mark class="highlight-gray"></mark>
and
<mark class="highlight-gray"><code>B[k(1); k(1+1)-1]</code></mark></p><p><code>A[2; 3]</code><mark class="highlight-gray"></mark>
and
<code>B[2; 3]</code></p></div><p></p></div><p></p><p></p></details></li></ul><p></p><p><mark class="highlight-blue">Co-Rank Lemma</mark></p><div class="indented"><p>
Let
<mark class="highlight-gray"><code>i</code></mark><mark class="highlight-gray"></mark>
be a shorthand for:
<mark class="highlight-gray"><code>(i)*(n+m)/p</code></mark><mark class="highlight-gray">(same applies for co-ranks</mark><mark class="highlight-gray"><code>j</code></mark><mark class="highlight-gray">,</mark><mark class="highlight-gray"><code>k</code></mark><mark class="highlight-gray">)</mark></p><p>
Let
<mark class="highlight-gray"><code>(i)-1</code></mark><mark class="highlight-gray"></mark>
be a shorthand for:
<mark class="highlight-gray"><code>(i)*(n+m)/p-1</code></mark></p><p>
Let
<mark class="highlight-gray"><code>i-1</code></mark>
be a shorthand for:
<mark class="highlight-gray"><code>(i-1)*(n+m)/p</code></mark><mark class="highlight-gray">(same applies for co-ranks</mark><mark class="highlight-gray"><code>j-1</code></mark><mark class="highlight-gray">,</mark><mark class="highlight-gray"><code>k-1</code></mark><mark class="highlight-gray">)</mark></p><hr/><p>
For any
<mark class="highlight-gray"><code>i</code></mark><mark class="highlight-gray"></mark>
in
<mark class="highlight-gray"><code>0 ≤ i &lt; n+m</code></mark><mark class="highlight-gray"></mark>
there are unique
<mark class="highlight-gray"><code>j</code></mark>
,
<mark class="highlight-gray"><code>k</code></mark><mark class="highlight-gray"></mark>
such that:
</p><div class="indented"><ol class="numbered-list" start="1" type="1"><li><mark class="highlight-gray"><code>j + k = i</code></mark></li></ol><ol class="numbered-list" start="2" type="1"><li>
Either
<mark class="highlight-gray"><code>k = 0</code></mark><mark class="highlight-gray"></mark>
or
<mark class="highlight-gray"><code>A[(j)-1] ≤ B[k]</code></mark></li></ol><ol class="numbered-list" start="3" type="1"><li>
Either
<mark class="highlight-gray"><code>j = 0</code></mark><mark class="highlight-gray"></mark>
or
<mark class="highlight-gray"><code>B[(k)-1] &lt; A[j]</code></mark></li></ol><ol class="numbered-list" start="4" type="1"><li><mark class="highlight-gray"><code>merge(A[0,…,(j)-1], B[0,…,(k)-1]) = C[0,…,i-1]</code></mark></li></ol></div><p></p><hr/><ul class="toggle"><li><details open=""><summary>Proof of lemma</summary><ol class="numbered-list" start="1" type="1"><li><mark class="highlight-teal">Invariant</mark><p><mark class="highlight-gray"><code>j + k = i</code></mark></p></li></ol><ol class="numbered-list" start="2" type="1"><li><mark class="highlight-teal">Transivity</mark><p><mark class="highlight-gray"><code>C[(i')-1] ≤ C[(i)-1] ≤ C[(i'')-1]</code></mark><mark class="highlight-gray"></mark>
for any
<mark class="highlight-gray"><code>i'</code></mark>
,
<mark class="highlight-gray"></mark><mark class="highlight-gray"><code>i''</code></mark><mark class="highlight-gray"></mark>
with
<mark class="highlight-gray"><code>i' &lt; i &lt; i''</code></mark></p><p>Because of</p><div class="indented"><ol class="numbered-list" start="1" type="i"><li><mark class="highlight-gray"><code>A[j-1; (j)-1] ∈ C[0; (i)-1]</code></mark><p><mark class="highlight-gray"><code>B[k-1; (k)-1] ∈ C[0; (i)-1]</code></mark><mark class="highlight-gray"></mark></p><p><em><mark class="highlight-gray">more precisely:</mark></em><em><mark class="highlight-gray"><code>∈ C[i-1; (i)-1]</code></mark></em><em><mark class="highlight-gray"></mark></em></p></li></ol><ol class="numbered-list" start="2" type="i"><li><mark class="highlight-gray"><code>A[j], B[k] ∉ C[0; (i)-1]</code></mark></li></ol></div><p></p><p>
The last element
<mark class="highlight-gray"><code>C[(i)-1]</code></mark>
must either be from
<mark class="highlight-gray"><code>A</code></mark>
or
<mark class="highlight-gray"><code>B</code></mark>
:
</p><div class="indented"><ol class="numbered-list" start="1" type="1"><li>
If
<code>A</code>
gets chosen:
<p><mark class="highlight-gray"><code>C[(i)-1] = A[(j)-1]</code></mark><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mtext></mtext><mo>⟹</mo><mtext></mtext></mstyle></mrow><annotation encoding="application/x-tex">\small \implies</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.49410000000000004em; vertical-align: -0.0216em"></span><span class="mspace sizing reset-size6 size5" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">⟹</span><span class="mspace sizing reset-size6 size5" style="margin-right: 0.2777777777777778em"></span></span></span></span></span><span>﻿</span></span><mark class="highlight-gray"><code>A[(j)-1] ≤ B[k]</code></mark><mark class="highlight-gray"></mark>
or else an element from
<mark class="highlight-gray"><code>B</code></mark><mark class="highlight-gray"></mark>
would have been chosen.
</p><p><mark class="highlight-gray"><code>B[(k)-1] &lt; A[(j)-1] ≤ A[j]</code></mark><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mtext></mtext><mo>⟹</mo><mtext></mtext></mstyle></mrow><annotation encoding="application/x-tex">\small \implies</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.49410000000000004em; vertical-align: -0.0216em"></span><span class="mspace sizing reset-size6 size5" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">⟹</span><span class="mspace sizing reset-size6 size5" style="margin-right: 0.2777777777777778em"></span></span></span></span></span><span>﻿</span></span><mark class="highlight-gray"><code>B[(k)-1] &lt; A[j]</code></mark></p></li></ol><ol class="numbered-list" start="2" type="1"><li>
If
<code>B</code>
gets chosen:
<p><mark class="highlight-gray"><code>C[(i)-1] = B[(k)-1]</code></mark><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mtext></mtext><mo>⟹</mo><mtext></mtext></mstyle></mrow><annotation encoding="application/x-tex">\small \implies</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.49410000000000004em; vertical-align: -0.0216em"></span><span class="mspace sizing reset-size6 size5" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">⟹</span><span class="mspace sizing reset-size6 size5" style="margin-right: 0.2777777777777778em"></span></span></span></span></span><span>﻿</span></span><mark class="highlight-gray"><code>B[(k)-1] &lt; A[j]</code></mark><mark class="highlight-gray"></mark>
or else an element from
<mark class="highlight-gray"><code>A</code></mark><mark class="highlight-gray"></mark>
would have been chosen.
</p><p>
Same as above:
<mark class="highlight-gray"><code>A[(j)-1] ≤ B[k]</code></mark></p></li></ol></div><p></p></li></ol></details></li></ul></div><p></p><p></p><p><mark class="highlight-blue">Co-Rank Algorithm</mark></p><div class="indented"><p>Very similar to binary search.</p><pre class="code"><code>j = min(i,n);
k = i-j;
jlow = max(0,i-m);done = 0;
do {
// case 1: j is too large
if (j&gt;0 &amp;&amp; k&lt;m &amp;&amp; A[j-1]&gt;B[k]) {
d = (1+j-jlow)/2;
klow = k;
j -= d;
k += d;
// case 2: k is too large
} else if (k&gt;0 &amp;&amp; j&lt;n &amp;&amp; B[k-1]&gt;=A[j]) {
d = (1+k-klow)/2;
jlow = j;
k -= d;
j += d;
} else {
done = 1;
}
} while (!done)</code></pre><ol class="numbered-list" start="1" type="1"><li>
First assume
<mark class="highlight-gray"><code>C</code></mark><mark class="highlight-gray"></mark>
is made out of only elements from
<mark class="highlight-gray"><code>A</code></mark><mark class="highlight-gray"></mark>
first:
<p><mark class="highlight-gray"><code>j = min(i, n)</code></mark></p><p><mark class="highlight-gray"><code>k = i-j</code></mark></p></li></ol><ol class="numbered-list" start="2" type="1"><li>
If
<code>A[(j)-1] &gt; B[k]</code><p>
then
<mark class="highlight-gray"><code>j</code></mark><mark class="highlight-gray"></mark>
was too large →
<em>we should have chosen element from</em><mark class="highlight-gray"><em><code>B</code></em></mark></p><p>
now halve
<mark class="highlight-gray"><code>j</code></mark><mark class="highlight-gray"></mark>
and increase
<mark class="highlight-gray"><code>k</code></mark><mark class="highlight-gray"></mark>
→
<em>we need</em><mark class="highlight-gray"><em><code>jlow</code></em></mark><mark class="highlight-gray"><em></em></mark><em>for this</em></p><div class="indented"><p><mark class="highlight-gray"><code>j=(j-jlow)/2</code></mark></p><p><mark class="highlight-gray"><code>klow</code></mark><mark class="highlight-gray"></mark>
= old value of
<mark class="highlight-gray"><code>k</code></mark></p></div><p></p></li></ol><ol class="numbered-list" start="3" type="1"><li>
If
<code>B[(k)-1] ≥ A[j]</code><p>
then
<mark class="highlight-gray"><code>k</code></mark><mark class="highlight-gray"></mark>
was too large →
<em>we should have chosen element from</em><mark class="highlight-gray"><code><em>A</em></code></mark></p><p>
now halve
<mark class="highlight-gray"><code>k</code></mark><mark class="highlight-gray"></mark>
and increase
<mark class="highlight-gray"><code>j</code></mark><mark class="highlight-gray"></mark>
→
<em>we need</em><mark class="highlight-gray"><em><code>klow</code></em></mark><mark class="highlight-gray"><em></em></mark><em>for this</em></p><div class="indented"><p><mark class="highlight-gray"><code>k = (k-klow)/2</code></mark></p><p><mark class="highlight-gray"><code>jlow</code></mark>
= old value of
<mark class="highlight-gray"><code>j</code></mark></p></div><p></p></li></ol><hr/><p>
Iterate
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small O(\log(n+m))</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.02778em">O</span><span class="mopen sizing reset-size6 size5">(</span><span class="mop sizing reset-size6 size5">
lo
<span style="margin-right: 0.01389em">g</span></span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">m</span><span class="mclose sizing reset-size6 size5">))</span></span></span></span></span><span>﻿</span></span>
times until lemma is satisfied
</p></div><p></p><p></p><h2>Solution 4)</h2><figure class="block-color-gray_background callout" style="white-space: pre-wrap; display: flex"><div style="font-size: 1.5em"><span class="icon">👉</span></div><div style="width: 100%">Perfectly load balanced: Turning upside-down and merging by co-ranking</div></figure><p><mark class="highlight-blue">Solution 4)</mark></p><div class="indented"><p>
Each processor handles a
<span style="border-bottom: 0.05em solid">segment of</span><span style="border-bottom: 0.05em solid"><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>C</mi></mstyle></mrow><annotation encoding="application/x-tex">\small C</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.614997em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.07153em">C</span></span></span></span></span><span>﻿</span></span></span>
of the same size.
</p><div class="indented"><p>Perfectly load-balanced, stable.</p></div><p></p><p>
Divide
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>C</mi></mstyle></mrow><annotation encoding="application/x-tex">\small C</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.614997em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.07153em">C</span></span></span></span></span><span>﻿</span></span>
of size
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small (n+m)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">m</span><span class="mclose sizing reset-size6 size5">)</span></span></span></span></span><span>﻿</span></span>
into
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>p</mi></mstyle></mrow><annotation encoding="application/x-tex">\small p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.5625em; vertical-align: -0.174996em"></span><span class="mord mathnormal sizing reset-size6 size5">p</span></span></span></span></span><span>﻿</span></span>
blocks of size
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mi>p</mi></mstyle></mrow><annotation encoding="application/x-tex">\small (n+m)/p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">m</span><span class="mclose sizing reset-size6 size5">)</span><span class="mord sizing reset-size6 size5">/</span><span class="mord mathnormal sizing reset-size6 size5">p</span></span></span></span></span><span>﻿</span></span>
.
</p><div class="indented"><p>
This means
<mark class="highlight-gray"><code>i ∈ [0; p-1]</code></mark></p><p>
The start index of block is
<mark class="highlight-gray"><code>i*(n+m)/p</code></mark></p></div><p></p><p>
For each block
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>i</mi></mstyle></mrow><annotation encoding="application/x-tex">\small i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.593568em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5">i</span></span></span></span></span><span>﻿</span></span>
:
</p><div class="indented"><ol class="numbered-list" start="1" type="1"><li>
Determine its co-ranks
<mark class="highlight-gray"><code>j(i), k(i)</code></mark><mark class="highlight-gray"></mark>
and store into
<mark class="highlight-gray"><code>coj[i], cok[i]</code></mark>
.
</li></ol><ol class="numbered-list" start="2" type="1"><li>
Merge the blocks
<mark class="highlight-gray"><code>A[j(i); j(i+1)-1]</code></mark>
and
<mark class="highlight-gray"><code>B[k(i); k(i+1)-1]</code></mark><mark class="highlight-gray"></mark>
into
<p><mark class="highlight-gray"><code>C[i*(n+m)/p; (i+1)*(n+m)/p-1]</code></mark></p></li></ol></div><p></p><pre class="code"><code>par (0 &lt;= i &lt; p) {
// 1) get coranks
// coj[]: array of j-coranks
// cok[]: array of k-coranks
corank(i*(n+m)/p, A, n, &amp;coj[i], B, m, &amp;cok[i]);
barrier; // processor i will need coranks of i+1
// 2) merge (sequentially)
merge(
&amp;A[coj[i]],           // interval start in A
coj[i+1] - coj[i],    // n (interval size in A)
&amp;B[cok[i]],           // interval start in B
cok[i+1] - cok[i],    // m (interval size in B)
&amp;C[i*(n+m)/p]         // interval start in C
);barrier;
}</code></pre><p><style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mstyle mathcolor="pink"><mtext>Wpar</mtext><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo><mo>≈</mo></mstyle><mi>p</mi><mo>⋅</mo><mi>O</mi><mo stretchy="false">(</mo><mfrac><mrow><mi>n</mi><mo>+</mo><mi>m</mi></mrow><mi>p</mi></mfrac><mo>+</mo><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>=</mo><mstyle mathcolor="pink"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo>+</mo><mi>p</mi><mo>⋅</mo><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mstyle></mstyle></mrow><annotation encoding="application/x-tex">
\small \textcolor{pink}{\text{Wpar}(p,n+m) \approx }p \cdot O(\frac{n+m}{p} + \log (n+m)) =
\textcolor{pink}{O(n+m+p \cdot \log(n+m) )}
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord text sizing reset-size6 size5" style="color: pink"><span class="mord" style="color: pink">Wpar</span></span><span class="mopen sizing reset-size6 size5" style="color: pink">(</span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">p</span><span class="mpunct sizing reset-size6 size5" style="color: pink">,</span><span class="mspace" style="margin-right: 0.16666666666666666em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5" style="color: pink">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">m</span><span class="mclose sizing reset-size6 size5" style="color: pink">)</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5" style="color: pink">≈</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.575001em; vertical-align: -0.174996em"></span><span class="mord mathnormal sizing reset-size6 size5">p</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">⋅</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 1.1317620000000002em; vertical-align: -0.427164em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.02778em">O</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord sizing reset-size6 size5"><span class="mopen nulldelimiter sizing reset-size5 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.7828866666666667em"><span style="top: -2.6550000000000002em"><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size5 size2 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span style="top: -3.23em"><span class="pstrut" style="height: 3em"></span><span class="frac-line" style="border-bottom-width: 0.04em"></span></span><span style="top: -3.3939999999999997em"><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size5 size2 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.47462666666666664em"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size5 size6"></span></span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mop sizing reset-size6 size5">
lo
<span style="margin-right: 0.01389em">g</span></span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">m</span><span class="mclose sizing reset-size6 size5">))</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">=</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.02778em; color: pink">O</span><span class="mopen sizing reset-size6 size5" style="color: pink">(</span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5" style="color: pink">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.599994em; vertical-align: -0.07499700000000001em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">m</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5" style="color: pink">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.575001em; vertical-align: -0.174996em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">p</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5" style="color: pink">⋅</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mop sizing reset-size6 size5" style="color: pink"><span style="color: pink">l</span><span style="color: pink">o</span><span style="margin-right: 0.01389em; color: pink">g</span></span><span class="mopen sizing reset-size6 size5" style="color: pink">(</span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5" style="color: pink">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="color: pink">m</span><span class="mclose sizing reset-size6 size5" style="color: pink">))</span></span></span></span></span><span>﻿</span></span></p><div class="indented"><p>
which is
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small O(n+m)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.02778em">O</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">m</span><span class="mclose sizing reset-size6 size5">)</span></span></span></span></span><span>﻿</span></span>
when
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mo stretchy="false">(</mo><mi>p</mi><mo>⋅</mo><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>∈</mo><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small (p \cdot \log (n+m)) \in O(n+m)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">p</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">⋅</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mop sizing reset-size6 size5">
lo
<span style="margin-right: 0.01389em">g</span></span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">m</span><span class="mclose sizing reset-size6 size5">))</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span><span class="mrel sizing reset-size6 size5">∈</span><span class="mspace" style="margin-right: 0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right: 0.02778em">O</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.9em; vertical-align: -0.225em"></span><span class="mord mathnormal sizing reset-size6 size5">m</span><span class="mclose sizing reset-size6 size5">)</span></span></span></span></span><span>﻿</span></span>
.
</p><p>Work optimal</p></div><p></p><p></p></div><p></p><p>
We can also get rid of the first synchronization
<mark class="highlight-gray"><code>barrier</code></mark><mark class="highlight-gray"></mark></p><div class="indented"><p>
It is necessary because process
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>i</mi></mstyle></mrow><annotation encoding="application/x-tex">\small i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.593568em; vertical-align: 0em"></span><span class="mord mathnormal sizing reset-size6 size5">i</span></span></span></span></span><span>﻿</span></span>
requires co-ranks of process
<style>
@import url("https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css");
</style><span class="notion-text-equation-token" contenteditable="false" data-token-index="0" style="user-select: all; -webkit-user-select: all; -moz-user-select: all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>i</mi><mo>+</mo><mn>1</mn></mstyle></mrow><annotation encoding="application/x-tex">\small i+1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.668565em; vertical-align: -0.07499700000000001em"></span><span class="mord mathnormal sizing reset-size6 size5">i</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right: 0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height: 0.5799960000000001em; vertical-align: 0em"></span><span class="mord sizing reset-size6 size5">1</span></span></span></span></span><span>﻿</span></span>
.
</p><ul class="toggle"><li><details open=""><summary>implementation</summary><p>Cost: Redundant computation of coranks, more memory</p><pre class="code"><code>par (0 &lt;= i &lt; p) {
// 1) get coranks -&gt; not arrays but variables j1, j2, k1, k2
corank(i*(n+m)/p, A, n, &amp;j1, B, m, &amp;k1);
corank((i+1)*(n+m)/p, A, n, &amp;j2, B, m, &amp;k2); // compute again
// 2) merge (sequentially)
merge(
&amp;A[j1],          // interval start in A
j2 - j1,         // n (interval size in A)
&amp;B[k1],          // interval start in B
k2 - k1,         // m (interval size in B)
&amp;C[i*(n+m)/p]    // interval start in C
);barrier; // not needed anymore
}</code></pre></details></li></ul></div><p></p></div></article></body></html>